var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&n(e,a,t[a]);if(r)for(var a of r(t))s.call(t,a)&&n(e,a,t[a]);return e},h=(e,r)=>t(e,a(r));const l=document.getElementById("gameCanvas"),m=l.getContext("2d");class c{constructor(){this.scene={},this.currentScene=null,this.currentSceneName=null,this.startTime=null,this.countCurrentScenePerformed=null}init(){this.scene={},this.currentScene=null,this.startTime=null,this.countCurrentScenePerformed=null}add(e,t){this.scene[e]=t}use(e){this.scene.hasOwnProperty(e)&&(this.currentScene=this.scene[e],this.currentSceneName=e,this.startTime=Date.now(),this.countCurrentScenePerformed=-1)}get getCurrentSceneName(){return this.currentSceneName}update(){this.currentScene(),++this.countCurrentScenePerformed}}const p=(e,t,a,r)=>Math.sqrt(Math.pow(a-e,2)+Math.pow(r-t,2)),d=(e,t,a,r)=>Math.sqrt(Math.pow(a-e,2)+Math.pow(r-t,2)),u=e=>{e.x<0-e.r?e.x=l.width+e.r:e.x>l.width+e.r&&(e.x=0-e.r),e.y<0-e.r?e.y=l.height+e.r:e.y>l.height+e.r&&(e.y=0-e.r)};class y{constructor(e){this.param={},this.init(e),this.dead=!1}init(e){this.param={x:e.x+4/3*e.r*Math.cos(e.a),y:e.y-4/3*e.r*Math.sin(e.a),xv:500*Math.cos(e.a)/30,yv:-500*Math.sin(e.a)/30,r:0,dist:0,explodeTime:0}}explode(){this.dead=!0}drawLaser(e){this.param.explodeTime>0?(m.fillStyle="orangered",m.beginPath(),m.arc(this.param.x,this.param.y,.75*e.r,0,2*Math.PI,!1),m.fill(),m.fillStyle="salmon",m.beginPath(),m.arc(this.param.x,this.param.y,.5*e.r,0,2*Math.PI,!1),m.fill(),m.fillStyle="pink",m.beginPath(),m.arc(this.param.x,this.param.y,.25*e.r,0,2*Math.PI,!1),m.fill()):(m.fillStyle="salmon",m.beginPath(),m.arc(this.param.x,this.param.y,2,0,2*Math.PI,!1),m.fill())}updateLasersPosition(){if(this.param.dist>.6*l.width)return void(this.dead=!0);this.param.explodeTime>0||(this.param.x+=this.param.xv,this.param.y+=this.param.yv),this.param.dist+=Math.sqrt(Math.pow(this.param.xv,2)+Math.pow(this.param.yv,2)),u(this.param)}isDead(){return this.dead}update(e){this.drawLaser(e),this.updateLasersPosition()}}const g={x:l.width/2,y:l.height/2,r:15,a:.5*Math.PI,targetPosition:{x:null,y:null},blinkNum:Math.ceil(30),blinkTime:Math.ceil(3),canShoot:!0,shootTime:0,explodeTime:0,dead:!1,lasers:[],rotate:0,thrusting:!1,thrust:{x:0,y:0}};let A={};const M=()=>A,S=()=>A.blinkNum>0,x=()=>A.explodeTime>0,v=()=>A.dead,f=()=>{let e={x:null,y:null};A.thrusting&&!A.dead?(e.x=A.thrust.x+=5*Math.cos(A.a)/30,e.y=A.thrust.y-=5*Math.sin(A.a)/30):(e.x=A.thrust.x-=.2*A.thrust.x/30,e.y=A.thrust.y-=.2*A.thrust.y/30),(e=>{A.thrust.x=e.x,A.thrust.y=e.y})(e)},b=()=>{S()&&(A.blinkTime--,0==A.blinkTime&&(A.blinkTime=Math.ceil(3),A.blinkNum--))},k=e=>{let t=2*Math.PI/30;e&&(t*=e),A.rotate=t},w=()=>{A.rotate=0},P=e=>{e&&(e.explodeTime=Math.ceil(9))},E=()=>{A=h(o({},g),{targetPosition:o({},g.targetPosition),lasers:[...g.lasers],thrust:o({},g.thrust)})},U=()=>{const e=A.blinkNum%2==0;var t;x()||(f(),A.a+=A.rotate,A.x+=A.thrust.x,A.y+=A.thrust.y),x()?(t=A,m.fillStyle="darkred",m.beginPath(),m.arc(t.x,t.y,1.7*t.r,0,2*Math.PI,!1),m.fill(),m.fillStyle="red",m.beginPath(),m.arc(t.x,t.y,1.4*t.r,0,2*Math.PI,!1),m.fill(),m.fillStyle="orange",m.beginPath(),m.arc(t.x,t.y,1.1*t.r,0,2*Math.PI,!1),m.fill(),m.fillStyle="yellow",m.beginPath(),m.arc(t.x,t.y,.8*t.r,0,2*Math.PI,!1),m.fill(),m.fillStyle="white",m.beginPath(),m.arc(t.x,t.y,.5*t.r,0,2*Math.PI,!1),m.fill(),(e=>{e.explodeTime--,e.explodeTime>0||E()})(A)):e?(((e,t)=>{m.strokeStyle=e.thrusting?"yellow":"white",m.lineWidth=30/t,m.beginPath(),m.moveTo(e.x+4/3*e.r*Math.cos(e.a),e.y-4/3*e.r*Math.sin(e.a)),m.lineTo(e.x-e.r*(2/3*Math.cos(e.a)+Math.sin(e.a)),e.y+e.r*(2/3*Math.sin(e.a)-Math.cos(e.a))),m.lineTo(e.x-e.r*(2/3*Math.cos(e.a)-Math.sin(e.a)),e.y+e.r*(2/3*Math.sin(e.a)+Math.cos(e.a))),m.closePath(),m.stroke(),m.fillStyle="darkred",m.beginPath(),m.arc(e.x+4/3*e.r*Math.cos(e.a),e.y-4/3*e.r*Math.sin(e.a),.2*e.r,0,2*Math.PI,!1),m.fill()})(A,20),b()):b(),S()||(()=>{if(0<A.shootTime)A.shootTime--;else if(A.lasers.length<10){const e=new y(A);A.lasers.push(e),A.shootTime=Math.ceil(18)}})(),u(A),A.lasers.forEach(((e,t)=>{e.isDead()?A.lasers.splice(t,1):e.update(A)}))},B=e=>{if(Object.keys(A).length&&!v())switch(e.code){case"KeyX":P(A);break;case"Space":(()=>{if(A.canShoot&&A.lasers.length<10){const e=new y(A);A.lasers.push(e)}A.canShoot=!1,console.log("shoot",A.lasers)})(),A.canShoot=!1;break;case"ArrowLeft":k();break;case"ArrowUp":A.thrusting=!0;break;case"ArrowRight":k(-1)}},I=e=>{if(!v())switch(e.code){case"Space":A.canShoot=!0;break;case"ArrowLeft":w();break;case"ArrowUp":A.thrusting=!1;break;case"ArrowRight":w()}},V=e=>{if(v())return;console.log("playerHandle: click");const t={x:e.layerX,y:e.layerY};var a;a=t,A.targetPosition=a;const r=(i=A.x,s=A.y,n=A.targetPosition.x,o=A.targetPosition.y,Math.atan2(n-i,o-s)-.5*Math.PI);var i,s,n,o,h;h=r,A.a=h,console.log("playerHandleClick: player",A);const[l,m]=[A.targetPosition.x-A.x,A.targetPosition.y-A.y];(e=>{A.thrust.x+=e.x,A.thrust.y+=e.y})({x:l/30,y:m/30})},L=()=>{m.fillStyle="black",m.fillRect(0,0,l.width,l.height)};const X=new Image;X.src="data:image/png;base64,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";class C{constructor(e,t,a){this.enemyType="enemy",this.param,this.level=e,this.initialize(t,a)}createParam(e,t,a){const r=1+.5*this.level,i={x:e,y:t,xv:50*Math.random()*r/30*(Math.random()<.5?1:-1),yv:50*Math.random()*r/30*(Math.random()<.5?1:-1),r:a,a:Math.random()*Math.PI*2,vert:Math.floor(11*Math.random()+5),offs:[]};return[...Array(i.vert)].map((e=>{i.offs.push(.2*Math.random()*2+1-.2)})),i}initialize(e,t){let a,r,i;if(!1===e)a=t.posX,r=t.posY,i=t.size;else{do{a=Math.floor(Math.random()*l.width),r=Math.floor(Math.random()*l.height)}while(p(e.x,e.y,a,r)<200+e.r);i=Math.ceil(50)}const s=this.createParam(a,r,i);this.param=s}draw(){var e;e=this.param,m.lineWidth=1.5,m.strokeStyle="red",m.beginPath(),m.moveTo(e.x+e.r*e.offs[0]*Math.cos(e.a),e.y+e.r*e.offs[0]*Math.sin(e.a)),[...Array(e.vert)].map(((t,a)=>{m.lineTo(e.x+e.r*e.offs[a]*Math.cos(e.a+a*Math.PI*2/e.vert),e.y+e.r*e.offs[a]*Math.sin(e.a+a*Math.PI*2/e.vert))})),m.closePath(),m.stroke()}updatePosition(){let e=this.param.x,t=this.param.y;e+=this.param.xv,t+=this.param.yv,this.param.x=e,this.param.y=t,u(this.param)}update(){this.draw(),this.updatePosition()}}class Q{constructor(e,t,a){this.enemyType="trackingEnemy",this.param,this.level=e,this.initialize(t,a)}createParam(e,t,a){const r=1+.1*this.level,i={x:e,y:t,xv:50*Math.random()*r/30*(Math.random()<.5?1:-1),yv:50*Math.random()*r/30*(Math.random()<.5?1:-1),r:a,a:Math.random()*Math.PI*2,vert:Math.floor(11*Math.random()+5),offs:[]};return[...Array(i.vert)].map((e=>{i.offs.push(.2*Math.random()*2+1-.2)})),i}initialize(e,t){let a,r,i;if(!1===e)a=t.posX,r=t.posY,i=t.size;else{do{a=Math.floor(Math.random()*l.width),r=Math.floor(Math.random()*l.height)}while(p(e.x,e.y,a,r)<200+e.r);i=Math.ceil(100/6)}const s=this.createParam(a,r,i);this.param=s}draw(){var e;e=this.param,m.lineWidth=1.5,m.strokeStyle="yellow",m.beginPath(),m.moveTo(e.x+e.r*e.offs[0]*Math.cos(e.a),e.y+e.r*e.offs[0]*Math.sin(e.a)),[...Array(e.vert)].map(((t,a)=>{m.lineTo(e.x+e.r*e.offs[a]*Math.cos(e.a+a*Math.PI*2/e.vert),e.y+e.r*e.offs[a]*Math.sin(e.a+a*Math.PI*2/e.vert))})),m.closePath(),m.stroke()}updatePosition(e){if("undefined"===e)return;const t=((e,t,a,r)=>Math.sqrt((e-a)**2+(t-r)**2))(e.x,e.y,this.param.x,this.param.y),[a,r]=[e.x-this.param.x,e.y-this.param.y],i=t/(100/30),s=a/i,n=r/i;let o=this.param.x,h=this.param.y;o+=s,h+=n,this.param.x=o,this.param.y=h,u(this.param)}update(e){this.draw(),this.updatePosition(e)}}const K=(e,t,a)=>{const r=((e,t)=>{const a=t.param.r==Math.ceil(50),r=t.param.r==Math.ceil(25);let i=[];return console.log(t),a?(console.log("isBigEnemy"),i.push(new C(e,!1,{posX:t.param.x,posY:t.param.y,size:Math.ceil(25)})),i.push(new C(e,!1,{posX:t.param.x,posY:t.param.y,size:Math.ceil(25)}))):r&&(console.log("small"),i.push(new C(e,!1,{posX:t.param.x,posY:t.param.y,size:Math.ceil(12.5)})),i.push(new C(e,!1,{posX:t.param.x,posY:t.param.y,size:Math.ceil(12.5)}))),i})(e,t[a]),i=[...t];i.splice(a,1);return i.concat(r)},T=(e,t,a)=>{if("enemy"===t[a].enemyType)return K(e,t,a);{const e=[...t];return e.splice(a,1),[...e]}},G=(e,t)=>{L(),U();const a=M();e.gameState.enemies.forEach((e=>{e.update(a)})),!e.isGameover()||x()?(((e,t)=>{let a;t.gameState.enemies.forEach(((r,i)=>{!(d(e.x,e.y,r.param.x,r.param.y)<e.r+r.param.r)||S()||x()||(P(e),t.reduceLives(),a=T(t.gameState.level,t.gameState.enemies,i),t.updateEnemies(a)),t.isGameover()||e.lasers.forEach((e=>{d(e.param.x,e.param.y,r.param.x,r.param.y)<e.param.r+r.param.r&&(e.explode(),a=T(t.gameState.level,t.gameState.enemies,i),t.updateEnemies(a))}))}))})(a,e),e.isStageClear()&&t.use("gameStageUp")):t.use("gameover")},W={title:(e,t)=>{L(),m.drawImage(X,0,0),t.use("title")},initGame:(e,t)=>{(e=>{E();const t=M();[...Array(e.gameState.level)].map((a=>{const r=new C(e.gameState.level,t);e.gameState.enemies.push(r)}));const a=new Q(e.gameState.level,t);e.gameState.enemies.push(a),L()})(e),t.use("game")},game:(e,t)=>{G(e,t)},gameStageUp:(e,t)=>{(e=>{L(),e.levelUp();const t=M();[...Array(e.gameState.level)].map((a=>{const r=new C(e.gameState.level,t);e.gameState.enemies.push(r)}))})(e),t.use("game")},gameover:(e,t)=>{(e=>{L(),e.gameState.enemies.forEach((e=>{e.update()})),console.log("gameOver")})(e)},debugPlayer:(e,t)=>{e.gameState,L(),U()}},q={level:1,enemies:[],lives:3};const D=new class{constructor(){this.gameState,this.scene=new c,this.game=this,this.setupEventHandle(),this.setupScene(),this.init()}init(){this.initState(),this.scene.use("initGame")}initState(){this.gameState=h(o({},q),{enemies:[...q.enemies]})}reduceLives(){this.gameState.lives--}levelUp(){this.gameState.level++}isGameover(){return this.gameState.lives<=0}isStageClear(){return!this.isGameover()&&!this.gameState.enemies.length}updateEnemies(e){this.gameState.enemies=e}setupScene(){this.scene.init(),Object.keys(W).forEach((e=>{this.scene.add(e,(()=>{W[e](this.game,this.scene)}))}))}setupEventHandle(){document.addEventListener("keydown",(e=>{console.log("keydown"),"KeyR"==e.code&&this.init(),B(e)})),document.addEventListener("keydown",(e=>{console.log("keydown"),"KeyN"==e.code&&(this.gameState.enemies=[]),B(e)})),document.addEventListener("keyup",(e=>{I(e)})),l.addEventListener("click",(e=>{e.preventDefault(),V(e)})),l.oncontextmenu=e=>{e.preventDefault(),V(e)}}render(){this.scene.update()}};let F,j,O,J;const Y=()=>{requestAnimationFrame(Y),j=Date.now(),J=j-O,J>F&&(O=j-J%F,D.render())};F=1e3/30,O=Date.now(),Y();
